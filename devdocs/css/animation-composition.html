<h1>animation-composition</h1>
<div class="section-content">
<div class="notecard experimental" id="sect1"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div> <p>The <code>animation-composition</code> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a> property specifies the <a href="https://developer.mozilla.org/en-US/docs/Glossary/Composite_operation">composite operation</a> to use when multiple animations affect the same property simultaneously.</p>
</div>
<section aria-labelledby="syntax"><h2 id="syntax">Syntax</h2>
<div class="section-content">
<div class="code-example"><pre data-language="css"><span class="token comment">/* Single animation */</span>
<span class="token property">animation-composition</span><span class="token punctuation">:</span> replace<span class="token punctuation">;</span>
<span class="token property">animation-composition</span><span class="token punctuation">:</span> add<span class="token punctuation">;</span>
<span class="token property">animation-composition</span><span class="token punctuation">:</span> accumulate<span class="token punctuation">;</span>

<span class="token comment">/* Multiple animations */</span>
<span class="token property">animation-composition</span><span class="token punctuation">:</span> replace<span class="token punctuation">,</span> add<span class="token punctuation">;</span>
<span class="token property">animation-composition</span><span class="token punctuation">:</span> add<span class="token punctuation">,</span> accumulate<span class="token punctuation">;</span>
<span class="token property">animation-composition</span><span class="token punctuation">:</span> replace<span class="token punctuation">,</span> add<span class="token punctuation">,</span> accumulate<span class="token punctuation">;</span>

<span class="token comment">/* Global values */</span>
<span class="token property">animation-composition</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>
<span class="token property">animation-composition</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span>
<span class="token property">animation-composition</span><span class="token punctuation">:</span> revert<span class="token punctuation">;</span>
<span class="token property">animation-composition</span><span class="token punctuation">:</span> revert-layer<span class="token punctuation">;</span>
<span class="token property">animation-composition</span><span class="token punctuation">:</span> unset<span class="token punctuation">;</span>
</pre></div> <div class="notecard note" id="sect2"> <p><strong>Note:</strong> When you specify multiple comma-separated values on an <code>animation-*</code> property, they will be applied to the animations in the order in which the <a href="animation-name"><code>animation-name</code></a>s appear. If the number of animations and compositions differ, the values listed in the <code>animation-composition</code> property will cycle from the first to the last <code>animation-name</code>, looping until all the animations have an assigned <code>animation-composition</code> value. For more information, see <a href="css_animations/using_css_animations#setting_multiple_animation_property_values">Setting multiple animation property values</a>.</p> </div>
</div></section><section aria-labelledby="values"><h3 id="values">Values</h3>
<div class="section-content"><dl> <dt id="replace"><code>replace</code></dt> <dd> <p>The effect value overrides the underlying value of the property. This is the default value.</p> </dd> <dt id="add"><code>add</code></dt> <dd> <p>The effect value builds on the underlying value of the property. This operation produces an additive effect. For animation types where the addition operation is not commutative, the order of the operands is the underlying value followed by the effect value.</p> </dd> <dt id="accumulate"><code>accumulate</code></dt> <dd> <p>The effect and underlying values are combined. For animation types where the addition operation is not commutative, the order of the operands is the underlying value followed by the effect value.</p> </dd> </dl></div></section><section aria-labelledby="description"><h2 id="description">Description</h2>
<div class="section-content">
<p>Each property that is targeted by the <a href="@keyframes">@keyframes</a> at-rule is associated with an effect stack. The value of the effect stack is calculated by combining the <em>underlying value</em> of a property in a CSS style rule with the <em>effect value</em> of that property in the keyframe. The <code>animation-composition</code> property helps to specify how to combine the underlying value with the effect value.</p> <p>For example, in the CSS below, <code>blur(5px)</code> is the underlying value, and <code>blur(10px)</code> is the effect value. The <code>filter</code> property is affected by both animations, <code>pulse</code> and <code>brightness-pulse</code>. The <code>animation-composition</code> property specifies the operation to perform to produce the final effect value after compositing the effect of the underlying value and the effect value.</p> <div class="code-example"><pre data-language="css"><span class="token selector">.icon:hover</span> <span class="token punctuation">{</span>
  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>5px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> 3s infinite pulse<span class="token punctuation">;</span>
  <span class="token property">animation-composition</span><span class="token punctuation">:</span> add<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@keyframes</span> pulse</span> <span class="token punctuation">{</span>
  <span class="token selector">0%</span> <span class="token punctuation">{</span>
    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>10px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">100%</span> <span class="token punctuation">{</span>
    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>20px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></div> <p>Consider different values for the <code>animation-composition</code> property in the above example. The final effect value in each of those cases will be calculated as explained below:</p> <ul> <li>With <code>replace</code>, <code>blur(10px)</code> will replace <code>blur(5px)</code> in the <code>0%</code> keyframe. This is the default behavior of the property.</li> <li>With <code>add</code>, the composite effect value in the <code>0%</code> keyframe will be <code>blur(5px) blur(10px)</code>.</li> <li>With <code>accumulate</code>, the composite effect value in <code>0%</code> keyframe will be <code>blur(15px)</code>.</li> </ul> <div class="notecard note" id="sect3"> <p><strong>Note:</strong> A composite operation can also be specified in a keyframe. In that case, the specified composite operation is used for each property first within that keyframe and then on each property in the next keyframe.</p> </div>
</div></section><section aria-labelledby="formal_definition"><h2 id="formal_definition">Formal definition</h2>
<div class="section-content"><span style="color:red;">Value not found in DB!</span></div></section><section aria-labelledby="formal_syntax"><h2 id="formal_syntax">Formal syntax</h2>
<div class="section-content"><pre class="notranslate"><span class="token property" id="animation-composition">animation-composition = </span><br>  <span class="token property">&lt;single-animation-composition&gt;</span><a href="value_definition_syntax#hash_mark">#</a>  <br><br><span class="token property" id="&lt;single-animation-composition&gt;">&lt;single-animation-composition&gt; = </span><br>  <span class="token keyword">replace</span>     <a href="value_definition_syntax#single_bar">|</a><br>  <span class="token keyword">add</span>         <a href="value_definition_syntax#single_bar">|</a><br>  <span class="token keyword">accumulate</span>  <br><br></pre></div></section><section aria-labelledby="examples"><h2 id="examples">Examples</h2>
</section><section aria-labelledby="understanding_the_animation-composition_values"><h3 id="understanding_the_animation-composition_values">Understanding the animation-composition values</h3>
<div class="section-content">
<p>The example below shows the effect of different <code>animation-composition</code> values side-by-side.</p> <h4 id="html">HTML</h4> <div class="code-example"><pre data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>replace
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>replace<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>target<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>add
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>add<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>target<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>accumulate
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accumulate<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>target<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</pre></div> <h4 id="css">CSS</h4> <p>Here the underlying value is <code>translateX(50px) rotate(45deg)</code>.</p> <div class="code-example"><pre data-language="css"><span class="token atrule"><span class="token rule">@keyframes</span> slide</span> <span class="token punctuation">{</span>
  <span class="token selector">20%, 40%</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>100px<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">80%, 100%</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>150px<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 220px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> cyan<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.target</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>50px<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> slide 5s linear infinite<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.target:hover</span> <span class="token punctuation">{</span>
   <span class="token property">animation-play-state</span><span class="token punctuation">:</span> paused<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token selector">#replace</span> <span class="token punctuation">{</span>
  <span class="token property">animation-composition</span><span class="token punctuation">:</span> replace<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">#add</span> <span class="token punctuation">{</span>
  <span class="token property">animation-composition</span><span class="token punctuation">:</span> add<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">#accumulate</span> <span class="token punctuation">{</span>
  <span class="token property">animation-composition</span><span class="token punctuation">:</span> accumulate<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div> <h4 id="result">Result</h4>
<iframe class="sample-code-frame" title="Understanding the animation-composition values" id="frame_reversing_the_animation_direction" width="100%" height="250" src="https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/CSS/animation-composition/_sample_.reversing_the_animation_direction.html" loading="lazy"></iframe> <ul> <li>With <code>replace</code>, the final effect value for the <code>transform</code> property in the <code>20%, 40%</code> keyframe is <code>translateX(100px)</code> (completely replacing the underlying value <code>translateX(50px) rotate(45deg)</code>). In this case, the element rotates from 45deg to 0deg as it animates from the default value set on the element itself to the non-rotated value set at the 20% mark. This is the default behavior.</li> <li>With <code>add</code>, the final effect value for the <code>transform</code> property in the <code>20%, 40%</code> keyframe is <code>translateX(50px) rotate(45deg)</code> followed by <code>translateX(100px)</code>. So the element is moved <code>50px</code> to the right, rotated <code>45deg</code>, then translated <code>100px</code> more along the redirected X axis.</li> <li>With <code>accumulate</code>, the final effect value in the <code>20%, 40%</code> keyframe is <code>translateX(150px) rotate(45deg)</code>. This means that the two X-axis translation values of <code>50px</code> and <code>100px</code> are combined or "accumulated".</li> </ul>
</div></section><h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://drafts.csswg.org/css-animations-2/#animation-composition">CSS Animations Level 2 <br><small># animation-composition</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>animation-composition</code></th>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>104</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
</tr></tbody>
</table>
<section aria-labelledby="see_also"><h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="css_animations/using_css_animations">Using CSS animations</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/composite">Composite property of KeyFrameEffect</a></li> </ul></div></section><aside class="metadata"><div class="metadata-content-container">
<div id="on-github" class="on-github">
<h3>Found a problem with this page?</h3>
<ul>
<li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/css/animation-composition/index.md" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/css/animation-composition/index.md?plain=1" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https:%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2Fanimation-composition&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder:+%60en-us%2Fweb%2Fcss%2Fanimation-composition%60%0A*+MDN+URL:+https:%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2Fanimation-composition%0A*+GitHub+URL:+https:%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fcss%2Fanimation-composition%2Findex.md%0A*+Last+commit:+https:%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F9333930e82040e63af0051b2f7b05430df1ccde3%0A*+Document+last+modified:+2022-09-02T05:21:09.000Z%0A%0A%3C%2Fdetails%3E" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li>
<li>Want to fix the problem yourself? See <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li>
</ul>
</div>
<p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-09-02T05:21:09.000Z">Sep 2, 2022</time>, <a href="animation-composition/contributors.txt">by MDN contributors</a></p>
</div></aside><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2022 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-composition" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/CSS/animation-composition</a>
  </p>
</div>
